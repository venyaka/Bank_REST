databaseChangeLog:
  - changeSet:
      id: dev_create_admin_user
      author: Veniamin
      context: dev
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT COUNT(*) FROM users WHERE email = 'admin@gmail.com'
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: first_name
                  value: admin_first_name
              - column:
                  name: email
                  value: admin@gmail.com
              - column:
                  name: last_name
                  value: admin_last_name
              - column:
                  name: password
                  value: $2a$10$ddalByW8laBfsx8wWvNGveGHSm8N4.E6a.D2Vpe5f54nH3vwTEBqu
              - column:
                  name: is_email_verificated
                  valueBoolean: true

  - changeSet:
      id: dev_create_admin_role
      author: Veniamin
      context: dev
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT COUNT(*) FROM user_role ur JOIN users u ON ur.user_id = u.id WHERE u.email = 'admin@gmail.com' AND ur.user_role = 'ADMIN'
      changes:
        - sql:
            sql: INSERT INTO user_role(user_id, user_role) VALUES((SELECT id FROM users WHERE email = 'admin@gmail.com'), 'ADMIN')

  - changeSet:
      id: dev_create_regular_user
      author: Veniamin
      context: dev
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT COUNT(*) FROM users WHERE email = 'user@gmail.com'
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: first_name
                  value: user_first_name
              - column:
                  name: email
                  value: user@gmail.com
              - column:
                  name: last_name
                  value: user_last_name
              - column:
                  name: password
                  value: $2a$10$ddalByW8laBfsx8wWvNGveGHSm8N4.E6a.D2Vpe5f54nH3vwTEBqu
              - column:
                  name: is_email_verificated
                  valueBoolean: true

  - changeSet:
      id: dev_create_user_role
      author: Veniamin
      context: dev
      preConditions:
        - onFail: MARK_RAN
        - sqlCheck:
            expectedResult: 0
            sql: SELECT COUNT(*) FROM user_role ur JOIN users u ON ur.user_id = u.id WHERE u.email = 'user@gmail.com' AND ur.user_role = 'USER'
      changes:
        - sql:
            sql: INSERT INTO user_role(user_id, user_role) VALUES((SELECT id FROM users WHERE email = 'user@gmail.com'), 'USER')
